const translations = {
    bg: {
        "nav-home": "–ù–∞—á–∞–ª–æ",
        "nav-schedule": "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
        "nav-about": "–ó–∞ –º–µ–Ω",
        "nav-contact": "–ö–æ–Ω—Ç–∞–∫—Ç",
        "footer-address": "–∫–≤. –°—Ç–∞—Ä–∏—è –≥—Ä–∞–¥, —É–ª. '–¶–∞—Ä –°–∞–º—É–∏–ª' 29, 2770 –ë–∞–Ω—Å–∫–æ, –ë—ä–ª–≥–∞—Ä–∏—è",
        "footer-phone": "üìû 0889 420 180",
        "footer-map-btn": "üìç –í–∏–∂ –≤ Google Maps",
        "footer-rights": "–í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.",
        "legal-privacy": "–ü–æ–≤–µ—Ä–∏—Ç–µ–ª–Ω–æ—Å—Ç",
        "legal-terms": "–û–±—â–∏ —É—Å–ª–æ–≤–∏—è",
        "hero-title": "Bear Functional | –ì—Ä—É–ø–æ–≤–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –ë–∞–Ω—Å–∫–æ",
        "hero-subtitle": "–û–≤–ª–∞–¥–µ–π —Ç—è–ª–æ—Ç–æ —Å–∏. –ò–∑–≥—Ä–∞–¥–∏ –∏—Å—Ç–∏–Ω—Å–∫–∞ —Å–∏–ª–∞. –í —Å—ä—Ä—Ü–µ—Ç–æ –Ω–∞ –ø–ª–∞–Ω–∏–Ω–∞—Ç–∞.",
        "hero-cta": "–ó–∞–ø–∏—à–∏ —Å–µ —Å–µ–≥–∞",
        "schedule-title": "–°–µ–¥–º–∏—á–µ–Ω –ì—Ä–∞—Ñ–∏–∫",
        "bonus-schedule-title": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω –°–µ–¥–º–∏—á–µ–Ω –ü—Ä–µ–≥–ª–µ–¥",
        "booking-title": "–ó–∞–ø–∞–∑–∏ —Å–≤–æ–µ—Ç–æ –º—è—Å—Ç–æ",
        "label-name": "–ò–º–µ",
        "label-phone": "–¢–µ–ª–µ—Ñ–æ–Ω",
        "label-workout": "–ò–∑–±–µ—Ä–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏ –¥–∞—Ç–∞",
        "option-select": "–ò–∑–±–µ—Ä–∏ –æ—Ç —Å–ø–∏—Å—ä–∫–∞...",
        "spots-left": "–û—Å—Ç–∞–≤–∞—Ç —Å–∞–º–æ {x} —Å–≤–æ–±–æ–¥–Ω–∏ –º–µ—Å—Ç–∞!",
        "sold-out": "(–ò–∑—á–µ—Ä–ø–∞–Ω–æ)",
        "btn-submit": "–ó–∞–ø–∞–∑–∏ –º—è—Å—Ç–æ",
        "success-title": "–ú—è—Å—Ç–æ—Ç–æ —Ç–∏ –µ –∑–∞–ø–∞–∑–µ–Ω–æ!",
        "success-msg": "–û—á–∞–∫–≤–∞–º–µ —Ç–µ –≤ –∑–∞–ª–∞—Ç–∞. –ù–µ –∑–∞–±—Ä–∞–≤—è–π —á–∏—Å—Ç–∏ –æ–±—É–≤–∫–∏ –∏ –¥–æ–±—Ä–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!",
        "btn-calendar": "üìÖ –î–æ–±–∞–≤–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä",
        "btn-maps": "üìç –í–∏–∂ –≤ Google Maps",
        "entrance-label": "–¢—ä—Ä—Å–∏ —Ç–æ–∑–∏ –≤—Ö–æ–¥:",
        "benefits-title": "–ó–∞—â–æ Bear Functional?",
        "benefit-1": "–ü–æ–≤–∏—à–µ–Ω–∞ –∫–æ—Å—Ç–Ω–∞ –ø–ª—ä—Ç–Ω–æ—Å—Ç¬π",
        "benefit-1-desc": "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏—Ç–µ —Å—ä—Å —Å—ä–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∑–∞–∑–¥—Ä–∞–≤—è–≤–∞—Ç —Å–∫–µ–ª–µ—Ç–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞.",
        "benefit-2": "–ü–æ–¥–æ–±—Ä–µ–Ω –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º¬≤",
        "benefit-2-desc": "–ü–æ–≤–µ—á–µ –º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞ –æ–∑–Ω–∞—á–∞–≤–∞ –ø–æ-–≤–∏—Å–æ–∫ –µ–Ω–µ—Ä–≥–∏–µ–Ω —Ä–∞–∑—Ö–æ–¥ –≤ –ø–æ–∫–æ–π.",
        "benefit-3": "–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è¬≥",
        "benefit-3-desc": "–§–∏–∑–∏—á–µ—Å–∫–∞—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –ø–æ–¥–æ–±—Ä—è–≤–∞ —Ñ–æ–∫—É—Å–∞ –∏ –ø–∞–º–µ—Ç—Ç–∞.",
        "benefit-4": "–ö–∞—á–µ—Å—Ç–≤–µ–Ω —Å—ä–Ω‚Å¥",
        "benefit-4-desc": "–†–µ–≥—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ —Ü–∏—Ä–∫–∞–¥–Ω–∏—Ç–µ —Ä–∏—Ç–º–∏ —á—Ä–µ–∑ —Ñ–∏–∑–∏—á–µ—Å–∫–æ –Ω–∞—Ç–æ–≤–∞—Ä–≤–∞–Ω–µ.",
        "about-title": "–ó–∞ –º–µ–Ω",
        "about-p1": "–í Bear Functional –≤—è—Ä–≤–∞–º–µ, —á–µ –¥–≤–∏–∂–µ–Ω–∏–µ—Ç–æ –µ –Ω–∞—á–∏–Ω –Ω–∞ –∂–∏–≤–æ—Ç. –§–æ–∫—É—Å–∏—Ä–∞–º–µ —Å–µ –≤—ä—Ä—Ö—É –∫–∞–ª–∏—Å—Ç–µ–Ω–∏–∫–∞, –ø—Ä–∏–º–∞–ª–Ω–∏ –¥–≤–∏–∂–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∞ —Å–∏–ª–∞, –∫–æ—è—Ç–æ –í–∏ —Å–ª—É–∂–∏ –≤—ä–≤ –≤—Å–µ–∫–∏–¥–Ω–µ–≤–∏–µ—Ç–æ.",
        "about-h1": "–ù–∞–¥ 10 –≥–æ–¥–∏–Ω–∏ –æ–ø–∏—Ç –≤ –∫–∞–ª–∏—Å—Ç–µ–Ω–∏–∫–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
        "about-h2": "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ Strength & Conditioning",
        "about-h3": "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–∞–ª –∂–∏–≤–æ—Ç–∞ –Ω–∞ –Ω–∞–¥ 500 –∞–∫—Ç–∏–≤–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∏",
        "about-h4": "–ï–∫—Å–ø–µ—Ä—Ç –ø–æ Primal Movement & Animal Flow",
        "about-tagline": "‚õìÔ∏è Bodyweight, Movement & Primal Strength",
        "about-cta": "–ó–∞–ø–æ—á–Ω–∏ —Å–≤–æ—è—Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è",
        "events-title": "–°—ä–±–∏—Ç–∏—è",
        "btn-read-more": "–ü—Ä–æ—á–µ—Ç–∏ –ø–æ–≤–µ—á–µ",
        "footer-map": "–û—Ç–≤–æ—Ä–∏ –≤ Google Maps",
        "Strength Foundations": "Strength Foundations",
        "Bodyweight Strength Evening Circuit": "Bodyweight Strength Evening Circuit",
        "Core & Ground Flow": "Core & Ground Flow",
        "RAVE Core Party": "RAVE Core Party",
        "Full Body Circuit": "Full Body Circuit",
        "HIIT - Beginners": "HIIT - Beginners",
        "btn-details": "–ó–∞–ø–∏—à–∏ —Å–µ",
        "class-time": "–ß–∞—Å",
        "days": ["–ù–µ–¥–µ–ª—è", "–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä—è–¥–∞", "–ß–µ—Ç–≤—ä—Ä—Ç—ä–∫", "–ü–µ—Ç—ä–∫", "–°—ä–±–æ—Ç–∞"],
        "viking-intro": "–ü–æ–≤–µ—á–µ –æ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞. –ï–ø–∏—á–Ω–æ –ø—Ä–µ–∂–∏–≤—è–≤–∞–Ω–µ.",
        "viking-desc": "–í Bear Functional –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–ª–∏–∑–∞–º–µ –≤—ä–≤ —Ñ–æ—Ä–º–∞ ‚Äì –Ω–∏–µ –∏–∑–≥—Ä–∞–∂–¥–∞–º–µ –∏—Å—Ç–æ—Ä–∏–∏. –ï–¥–∏–Ω –æ—Ç –Ω–∞–π-—è—Ä–∫–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–∏ –∑–∞ —Ç–æ–≤–∞ –µ Viking Warrior Challenge ‚Äì –∞–≤—Ç–æ—Ä—Å–∫–æ —Å—ä–±–∏—Ç–∏–µ, –∫–æ–µ—Ç–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–∞—Ö, –∑–∞ –¥–∞ –¥–æ–∫–∞–∂–∞, —á–µ —Ñ–∏—Ç–Ω–µ—Å—ä—Ç –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∏–Ω—Ç—Ä–∏–≥—É–≤–∞—â, —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –∏ —Å–∏–ª–Ω–æ —Å–æ—Ü–∏–∞–ª–µ–Ω.",
        "viking-exp-title": "–ö–∞–∫–≤–æ –ø—Ä–µ–∂–∏–≤—è—Ö–∞ —É—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ?",
        "viking-exp-1": "<strong>–ü—ä–ª–Ω–æ –ø–æ—Ç–∞–ø—è–Ω–µ:</strong> –†–∞–∑–¥–µ–ª–µ–Ω–∏ –Ω–∞ –∫–ª–∞–Ω–æ–≤–µ (Berserker –∏ Varangian), —Ç—Ä–µ–Ω–∏—Ä–∞—â–∏—Ç–µ —Å–ø—Ä—è—Ö–∞ –¥–∞ –±—ä–¥–∞—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ–ø–æ–∑–Ω–∞—Ç–∏ –≤ –∑–∞–ª–∞—Ç–∞ –∏ —Å—Ç–∞–Ω–∞—Ö–∞ —Å—ä–æ—Ç–±–æ—Ä–Ω–∏—Ü–∏, –±–æ—Ä–µ—â–∏ —Å–µ –∑–∞ –æ–±—â–∞ —Ü–µ–ª.",
        "viking-exp-2": "<strong>–ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:</strong> –ß—Ä–µ–∑ —É–Ω–∏–∫–∞–ª–Ω–∞—Ç–∞ –º–∏ ‚Äû—Å–∏—Å—Ç–µ–º–∞ –æ—Ç —Ä—É–Ω–∏‚Äú, —É—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ö–∞ –º—É—Å–∫—É–ª–∏—Ç–µ —Å–∏, –Ω–æ –∏ –≤–∑–µ–º–∞—Ö–∞ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—à–µ–Ω–∏—è, –∫–æ–∏—Ç–æ –ø—Ä–æ–º–µ–Ω—è—Ö–∞ —Ö–æ–¥–∞ –Ω–∞ —Å—ä—Å—Ç–µ–∑–∞–Ω–∏–µ—Ç–æ.",
        "viking-exp-3": "<strong>–ò–∑–ø–∏—Ç–∞–Ω–∏–µ –Ω–∞ –¥—É—Ö–∞:</strong> –û—Ç –æ–±—Ä—ä—â–∞–Ω–µ –Ω–∞ –≥—É–º–∏ –¥–æ –¥—ä—Ä–ø–∞–Ω–µ –Ω–∞ —à–µ–π–Ω–∏ ‚Äì –≤—Å—è–∫–æ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞—Ç–µ–ª—Å—Ç–≤–æ –±–µ—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–æ —Ç–∞–∫–∞, —á–µ –¥–∞ –∏–∑–∫–∞—Ä–∞ –Ω–∞–π-–¥–æ–±—Ä–æ—Ç–æ –æ—Ç –≤—Å–µ–∫–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∏–≤–æ—Ç–æ –º—É.",
        "viking-exp-4": "<strong>–û–±—â–Ω–æ—Å—Ç:</strong> –°—ä–±–∏—Ç–∏–µ—Ç–æ –∑–∞–≤—ä—Ä—à–∏ —Å –±–∞–Ω–∫–µ—Ç, –∫–æ–π—Ç–æ –¥–æ–∫–∞–∑–∞, —á–µ –∏—Å—Ç–∏–Ω—Å–∫–∞—Ç–∞ —Å–∏–ª–∞ —Å–µ –≥—Ä–∞–¥–∏ –≤—ä—Ä—Ö—É –∑–¥—Ä–∞–≤–∏ –≤—Ä—ä–∑–∫–∏ –∏ —Å–ø–æ–¥–µ–ª–µ–Ω —Ç—Ä–∏—É–º—Ñ.",
        "viking-why-title": "–ó–∞—â–æ —Ç–∏ —Ä–∞–∑–∫–∞–∑–≤–∞–º —Ç–æ–≤–∞?",
        "viking-why-desc": "Viking Warrior Challenge –µ —Å–∞–º–æ –Ω–∞—á–∞–ª–æ—Ç–æ. –ú–æ—è—Ç–∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –µ, —á–µ –∑–∞–ª–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –º—è—Å—Ç–æ, –∫–æ–µ—Ç–æ —Ç–µ –≤–¥—ä—Ö–Ω–æ–≤—è–≤–∞ –¥–∞ –±—ä–¥–µ—à –ø–æ–≤–µ—á–µ. –ü–æ–¥–≥–æ—Ç–≤—è–º –ø–æ—á–≤–∞—Ç–∞ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∏—Ç–µ –Ω–∏ –≥–æ–ª–µ–º–∏ –ø—Ä–æ–µ–∫—Ç–∏.",
        "viking-cta-title": "–ë—ä–¥–∏ —Å—Ä–µ–¥ –ø—ä—Ä–≤–∏—Ç–µ, –∫–æ–∏—Ç–æ —â–µ –Ω–∞—É—á–∞—Ç –∑–∞ —Å–ª–µ–¥–≤–∞—â–æ—Ç–æ –Ω–∏ –µ–ø–∏—á–Ω–æ —Å—ä–±–∏—Ç–∏–µ.",
        "viking-btn-submit": "–ò–ù–§–û–†–ú–ò–†–ê–ô –ú–ï –ó–ê –°–õ–ï–î–í–ê–©–û–¢–û –°–™–ë–ò–¢–ò–ï",
        "viking-name-placeholder": "–¢–≤–æ–µ—Ç–æ –∏–º–µ",
        "viking-email-placeholder": "–¢–≤–æ—è—Ç –∏–º–µ–π–ª",
        "viking-success": "–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º —Ç–∏, –í–æ–∏–Ω–µ! –©–µ —Å–µ —Å–≤—ä—Ä–∂–µ–º —Å —Ç–µ–± —Å–∫–æ—Ä–æ.",
        "viking-error": "–£–ø—Å, –Ω–µ—â–æ —Å–µ –æ–±—ä—Ä–∫–∞. –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π –ø–∞–∫.",
        "months": ["–Ø–Ω—É–∞—Ä–∏", "–§–µ–≤—Ä—É–∞—Ä–∏", "–ú–∞—Ä—Ç", "–ê–ø—Ä–∏–ª", "–ú–∞–π", "–Æ–Ω–∏", "–Æ–ª–∏", "–ê–≤–≥—É—Å—Ç", "–°–µ–ø—Ç–µ–º–≤—Ä–∏", "–û–∫—Ç–æ–º–≤—Ä–∏", "–ù–æ–µ–º–≤—Ä–∏", "–î–µ–∫–µ–º–≤—Ä–∏"],
        "week-nav-prev": "–ü—Ä–µ–¥–∏—à–Ω–∞",
        "week-nav-next": "–°–ª–µ–¥–≤–∞—â–∞"
    },
    en: {
        "nav-home": "Home",
        "nav-schedule": "Training",
        "nav-about": "About Me",
        "nav-contact": "Contact",
        "footer-address": "Tsar Samuil str. 29, Bansko 2770, Bulgaria",
        "footer-phone": "üìû 0889 420 180",
        "footer-map-btn": "üìç View on Google Maps",
        "footer-rights": "All rights reserved.",
        "legal-privacy": "Privacy Policy",
        "legal-terms": "Terms & Conditions",
        "hero-title": "Bear Functional | Strength & Conditioning in Bansko",
        "hero-subtitle": "Master your body. Build real strength. In the heart of the mountains.",
        "hero-cta": "Book Your Spot",
        "schedule-title": "Weekly Schedule",
        "bonus-schedule-title": "Interactive Weekly Overview",
        "booking-title": "Secure Your Spot",
        "label-name": "Name",
        "label-phone": "Phone",
        "label-workout": "Pick Workout & Date",
        "option-select": "Select from list...",
        "spots-left": "Only {x} spots left!",
        "sold-out": "(Sold Out)",
        "btn-submit": "Book Now",
        "success-title": "Spot Secured!",
        "success-msg": "We're looking forward to seeing you at the gym. Don't forget clean shoes and good vibes!",
        "btn-calendar": "üìÖ Add to Calendar",
        "btn-maps": "üìç Open in Google Maps",
        "entrance-label": "Look for this entrance:",
        "benefits-title": "Why Bear Functional?",
        "benefit-1": "Increased Bone Density¬π",
        "benefit-1-desc": "Resistance training strengthens the skeletal system.",
        "benefit-2": "Improved Metabolic Rate¬≤",
        "benefit-2-desc": "More muscle mass means higher resting energy expenditure.",
        "benefit-3": "Enhanced Cognitive Function¬≥",
        "benefit-3-desc": "Physical activity improves focus and memory.",
        "benefit-4": "Better Sleep Quality‚Å¥",
        "benefit-4-desc": "Regulation of circadian rhythms through physical exertion.",
        "about-title": "About Me",
        "about-p1": "At Bear Functional, we believe in movement as a lifestyle. We focus on calisthenics, primal movements, and functional strength that serves you every day.",
        "about-h1": "10+ Years Experience in Calisthenics & Functional Training",
        "about-h2": "Certified Strength & Conditioning Specialist",
        "about-h3": "Transformed 500+ lives through movement",
        "about-h4": "Expert in Primal Movement & Animal Flow",
        "about-tagline": "‚õìÔ∏è Bodyweight, Movement & Primal Strength",
        "about-cta": "Start Your Transformation",
        "events-title": "Events",
        "btn-read-more": "Read More",
        "footer-map": "Open in Google Maps",
        "Strength Foundations": "Strength Foundations",
        "Bodyweight Strength Evening Circuit": "Bodyweight Strength Evening Circuit",
        "Core & Ground Flow": "Core & Ground Flow",
        "RAVE Core Party": "RAVE Core Party",
        "Full Body Circuit": "Full Body Circuit",
        "HIIT - Beginners": "HIIT - Beginners",
        "btn-details": "Enroll Now",
        "class-time": "Class time",
        "days": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        "viking-intro": "More Than a Workout. A Legend in the Making.",
        "viking-desc": "At Bear Functional, we don‚Äôt just get you in shape‚Äîwe build stories. One of the best examples of this is the Viking Warrior Challenge‚Äîa signature event I designed to prove that fitness can be immersive, strategic, and deeply social.",
        "viking-exp-title": "What did the participants experience?",
        "viking-exp-1": "<strong>Total Immersion:</strong> Drafted into clans (Berserker and Varangian), members stopped being strangers and became brothers-in-arms, fighting for a common goal.",
        "viking-exp-2": "<strong>Gamification & Strategy:</strong> Through my unique \"Rune System,\" participants didn't just use their muscles‚Äîthey made tactical decisions that shifted the tides of the entire competition.",
        "viking-exp-3": "<strong>A Test of Grit:</strong> From tire flips to sled pushes, every challenge was structured to bring out the absolute best in everyone, regardless of their starting point.",
        "viking-exp-4": "<strong>Community First:</strong> The event concluded with a themed banquet, proving that real strength is built on solid bonds and shared victory.",
        "viking-why-title": "Why does this matter to you?",
        "viking-why-desc": "The Viking Warrior Challenge is just a glimpse of what‚Äôs to come. My philosophy is that the gym should be a place that inspires you to be more. I am already laying the groundwork for our next big projects.",
        "viking-cta-title": "Be the first to know when the next legend begins.",
        "viking-btn-submit": "STAY UPDATED FOR THE NEXT EVENT",
        "viking-name-placeholder": "Your name",
        "viking-email-placeholder": "Your email",
        "viking-success": "Thank you, Warrior! We will be in touch soon.",
        "viking-error": "Oops, something went wrong. Please try again.",
        "months": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        "week-nav-prev": "Previous",
        "week-nav-next": "Next"
    }
};

let currentWeekOffset = 0;
let lastOccupancyData = {}; // Global store to re-render table with correct spots if needed

// ... (rest of the file until the end)

// Burger Menu Logic
const burgerMenu = document.getElementById('burger-menu');
const navLinks = document.querySelector('.nav-links');

if (burgerMenu) {
    burgerMenu.addEventListener('click', () => {
        burgerMenu.classList.toggle('active');
        navLinks.classList.toggle('active');
    });
}

// Close menu when link is clicked
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        burgerMenu.classList.remove('active');
        navLinks.classList.remove('active');
    });
});


const trainingData = [
    {
        name: "Strength Foundations",
        day: 1, time: "13:00", duration: "13:00 - 13:45",
        desc_en: "Master the basics of bodyweight movement. We take our time to break down how to do foundational exercises‚Äîlike squats, lunges, and push-ups‚Äîcorrectly. Using power bands, light kettlebells, and our own body weight, you'll learn how to create tension and build strength safely.",
        desc_bg: "–û–≤–ª–∞–¥–µ–π—Ç–µ –æ—Å–Ω–æ–≤–∏—Ç–µ –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏—è—Ç–∞ —Å—ä—Å —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Ç–µ–≥–ª–æ. –û—Ç–¥–µ–ª—è–º–µ –≤—Ä–µ–º–µ, –∑–∞ –¥–∞ —Ä–∞–∑–≥–ª–æ–±–∏–º –æ—Å–Ω–æ–≤–Ω–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∫–∞—Ç–æ –∫–ª—è–∫–∞–Ω–∏—è, –Ω–∞–ø–∞–¥–∏ –∏ –ª–∏—Ü–µ–≤–∏ –æ–ø–æ—Ä–∏. –ò–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ –ª–∞—Å—Ç–∏—Ü–∏, –ª–µ–∫–∏ –ø—É–¥–æ–≤–∫–∏ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Ç–µ–≥–ª–æ, —â–µ —Å–µ –Ω–∞—É—á–∏—Ç–µ –∫–∞–∫ –¥–∞ –∏–∑–≥—Ä–∞–∂–¥–∞—Ç–µ —Å–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ."
    },
    {
        name: "Bodyweight Strength Evening Circuit",
        day: 1, time: "20:00", duration: "20:00 - 20:45",
        desc_en: "Build real, functional strength focusing on calisthenics and primal movements. We use bear crawls, gorilla walks, and slam balls to challenge your muscles. If you want to learn how to handle your own body weight effectively, this is for you.",
        desc_bg: "–ò–∑–≥—Ä–∞–¥–µ—Ç–µ –∏—Å—Ç–∏–Ω—Å–∫–∞, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–∞ —Å–∏–ª–∞ —Å —Ñ–æ–∫—É—Å –≤—ä—Ä—Ö—É –∫–∞–ª–∏—Å—Ç–µ–Ω–∏–∫–∞ –∏ –ø—Ä–∏–º–∞–ª–Ω–∏ –¥–≤–∏–∂–µ–Ω–∏—è. –ò–∑–ø–æ–ª–∑–≤–∞–º–µ '–º–µ—á–µ—à–∫–æ —Ö–æ–¥–µ–Ω–µ', '–≥–æ—Ä–∏–ª–∞' –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —Ç–æ–ø–∫–∏, –∑–∞ –¥–∞ –ø—Ä–µ–¥–∏–∑–≤–∏–∫–∞–º–µ –º—É—Å–∫—É–ª–∏—Ç–µ –≤–∏. –ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ —É–ø—Ä–∞–≤–ª—è–≤–∞—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–æ—Ç–æ —Å–∏ —Ç–µ–≥–ª–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —Ç–æ–≤–∞ –µ –∑–∞ –≤–∞—Å."
    },
    {
        name: "Core & Ground Flow",
        day: 3, time: "13:00", duration: "13:00 - 13:45",
        desc_en: "Strengthen your core and improve your posture. We spend time on the mats using yoga balls and controlled bodyweight exercises to ease back tension. We mix in animal flow movements to help coordination.",
        desc_bg: "–£–∫—Ä–µ–ø–µ—Ç–µ —è–¥—Ä–æ—Ç–æ —Å–∏ –∏ –ø–æ–¥–æ–±—Ä–µ—Ç–µ —Å—Ç–æ–π–∫–∞—Ç–∞ —Å–∏. –ü—Ä–µ–∫–∞—Ä–≤–∞–º–µ –≤—Ä–µ–º–µ –Ω–∞ —Ç–µ–ø–∏—Ö–∞, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ –π–æ–≥–∞ —Ç–æ–ø–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞–Ω–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∑–∞ –æ–±–ª–µ–∫—á–∞–≤–∞–Ω–µ –Ω–∞ –Ω–∞–ø—Ä–µ–∂–µ–Ω–∏–µ—Ç–æ –≤ –≥—ä—Ä–±–∞. –°–º–µ—Å–≤–∞–º–µ 'animal flow' –¥–≤–∏–∂–µ–Ω–∏—è –∑–∞ –ø–æ-–¥–æ–±—Ä–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è."
    },
    {
        name: "RAVE Core Party",
        day: 3, time: "20:00", duration: "20:00 - 20:45",
        desc_en: "High energy, great music, and good vibes. Lights go down and music goes up. We use smart bodyweight movements to keep the heart rate up. You control your own pace.",
        desc_bg: "–í–∏—Å–æ–∫–∞ –µ–Ω–µ—Ä–≥–∏—è, —Å—Ç—Ä–∞—Ö–æ—Ç–Ω–∞ –º—É–∑–∏–∫–∞ –∏ –¥–æ–±—Ä–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. –°–≤–µ—Ç–ª–∏–Ω–∏—Ç–µ –≥–∞—Å–Ω–∞—Ç, –º—É–∑–∏–∫–∞—Ç–∞ —Å–µ —É—Å–∏–ª–≤–∞. –ò–∑–ø–æ–ª–∑–≤–∞–º–µ –∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–∏ –¥–≤–∏–∂–µ–Ω–∏—è —Å—ä—Å —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Ç–µ–≥–ª–æ, –∑–∞ –¥–∞ –ø–æ–¥–¥—ä—Ä–∂–∞–º–µ –ø—É–ª—Å–∞ –≤–∏—Å–æ–∫. –í–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞—Ç–µ —Ç–µ–º–ø–æ—Ç–æ."
    },
    {
        name: "Full Body Circuit",
        day: 5, time: "13:00", duration: "13:00 - 13:45",
        desc_en: "A complete workout at your own pace. Different stations with slam balls, power bands, and dumbbells. A great way to get your heart rate up and learn balanced routines.",
        desc_bg: "–ü—ä–ª–Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤—ä–≤ –≤–∞—à–µ—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Ç–µ–º–ø–æ. –†–∞–∑–ª–∏—á–Ω–∏ —Å—Ç–∞–Ω—Ü–∏–∏ —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —Ç–æ–ø–∫–∏, –ª–∞—Å—Ç–∏—Ü–∏ –∏ –¥—ä–º–±–µ–ª–∏. –°—Ç—Ä–∞—Ö–æ—Ç–µ–Ω –Ω–∞—á–∏–Ω –¥–∞ –≤–¥–∏–≥–Ω–µ—Ç–µ –ø—É–ª—Å–∞ –∏ –¥–∞ –Ω–∞—É—á–∏—Ç–µ –±–∞–ª–∞–Ω—Å–∏—Ä–∞–Ω–∏ —Ä—É—Ç–∏–Ω–∏."
    },
    {
        name: "HIIT - Beginners",
        day: 0, time: "10:00", duration: "10:00 - 10:45",
        desc_en: "A gentle introduction to interval training. We show you simple versions of bodyweight exercises, focusing on technique so you move safely. Find a rhythm that works for you.",
        desc_bg: "–ù–µ–∂–Ω–æ –≤—ä–≤–µ–¥–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–Ω–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏. –ü–æ–∫–∞–∑–≤–∞–º–µ –≤–∏ –ª–µ—Å–Ω–∏ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å—ä—Å —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Ç–µ–≥–ª–æ, —Ñ–æ–∫—É—Å–∏—Ä–∞–π–∫–∏ —Å–µ –≤—ä—Ä—Ö—É —Ç–µ—Ö–Ω–∏–∫–∞—Ç–∞. –ù–∞–º–µ—Ä–µ—Ç–µ —Ä–∏—Ç—ä–º–∞, –∫–æ–π—Ç–æ —Ä–∞–±–æ—Ç–∏ –∑–∞ –≤–∞—Å."
    }
];

let currentLang = 'bg';

function setLanguage(lang) {
    currentLang = lang;
    document.documentElement.lang = lang;
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (key.startsWith('viking-exp-')) {
                el.innerHTML = translations[lang][key];
            } else {
                el.textContent = translations[lang][key];
            }
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (translations[lang][key]) {
            el.placeholder = translations[lang][key];
        }
    });

    document.getElementById('lang-switch').textContent = lang === 'bg' ? 'EN' : 'BG';

    // Refresh dynamic content
    renderScheduleCards();
    renderScheduleTable();
    renderWorkoutOptions();

    // Update expandable button if expanded
    const expandBtn = document.getElementById('viking-read-more');
    const moreContent = document.querySelector('.desc-more');
    if (expandBtn && moreContent && !moreContent.classList.contains('hidden')) {
        expandBtn.textContent = currentLang === 'bg' ? '–°–∫—Ä–∏–π' : 'Show Less';
    }
}

function getWeekDates(offset = 0) {
    const now = new Date();
    const day = now.getDay();
    // Normalize Sunday for Monday-start logic
    const diff = now.getDate() - day + (day === 0 ? -6 : 1);
    const monday = new Date(now);
    monday.setDate(diff + (offset * 7));
    monday.setHours(0, 0, 0, 0);

    const weekDates = [];
    for (let i = 0; i < 7; i++) {
        const d = new Date(monday);
        d.setDate(monday.getDate() + i);
        d.setHours(0, 0, 0, 0);
        weekDates.push(d);
    }
    return weekDates;
}

function isWorkoutPassed(date, timeRange) {
    const now = new Date();
    // timeRange could be "10:00 - 10:45"
    const start = timeRange.includes(' - ') ? timeRange.split(' - ')[0] : timeRange;
    const [h, m] = start.split(':').map(Number);

    const workoutStart = new Date(date);
    workoutStart.setHours(h, m, 0, 0);

    return now > workoutStart;
}

function renderScheduleCards() {
    const container = document.getElementById('cards-container');
    if (!container) return;
    container.innerHTML = '';

    trainingData.forEach(workout => {
        const card = document.createElement('div');
        card.className = 'workout-card';

        // Card itself opens modal for details
        card.onclick = () => openWorkoutModal(workout);

        card.innerHTML = `
            <div class="day-time">${translations[currentLang].days[workout.day].toUpperCase()} | ${workout.time}</div>
            <h3>${translations[currentLang][workout.name] || workout.name}</h3>
            <p>${currentLang === 'bg' ? workout.desc_bg : workout.desc_en}</p>
            <button class="btn-secondary" style="width:100%;" onclick="event.stopPropagation(); scrollToBooking('${workout.name}')">
                ${translations[currentLang]["btn-details"]}
            </button>
        `;
        container.appendChild(card);
    });
}

function renderScheduleTable() {
    const container = document.getElementById('table-container');
    if (!container) return;
    container.innerHTML = '';

    const isMobile = window.innerWidth < 768;
    const weekDates = getWeekDates(currentWeekOffset);

    // Week Navigation UI
    const startDate = weekDates[0];
    const endDate = weekDates[6];
    const rangeText = `${startDate.getDate()} ${translations[currentLang].months[startDate.getMonth()]} - ${endDate.getDate()} ${translations[currentLang].months[endDate.getMonth()]}`;

    const nav = document.createElement('div');
    nav.className = 'week-navigation';
    nav.innerHTML = `
        <button class="nav-arrow" id="prev-week" ${currentWeekOffset === 0 ? 'disabled' : ''} aria-label="Previous week">&lt;</button>
        <div class="current-week-range">${rangeText}</div>
        <button class="nav-arrow" id="next-week" aria-label="Next week">&gt;</button>
    `;
    container.appendChild(nav);

    nav.querySelector('#prev-week').onclick = () => {
        if (currentWeekOffset > 0) {
            currentWeekOffset--;
            renderScheduleTable();
            fetchOccupancy();
        }
    };
    nav.querySelector('#next-week').onclick = () => {
        currentWeekOffset++;
        renderScheduleTable();
        fetchOccupancy();
    };

    const table = document.createElement('table');
    table.className = 'training-table' + (isMobile ? ' mobile-pivoted' : '');

    const dayOrder = [1, 2, 3, 4, 5, 6, 0]; // Mon-Sun
    const timeSlots = ["10:00 - 10:45", "13:00 - 13:45", "20:00 - 20:45"];

    if (isMobile) {
        const thead = document.createElement('thead');
        const hRow = document.createElement('tr');
        hRow.appendChild(document.createElement('th'));

        timeSlots.forEach(slot => {
            const th = document.createElement('th');
            th.textContent = slot.split(' - ')[0];
            hRow.appendChild(th);
        });
        thead.appendChild(hRow);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        dayOrder.forEach((dayIndex, i) => {
            const tr = document.createElement('tr');
            const d = weekDates[i];
            const dateStr = `${d.getDate()}.${(d.getMonth() + 1).toString().padStart(2, '0')}`;

            const dayCell = document.createElement('td');
            dayCell.className = 'time-cell sticky-col';
            dayCell.innerHTML = `<strong>${translations[currentLang].days[dayIndex]}</strong><br><span style="font-size: 0.7rem; opacity: 0.6;">${dateStr}</span>`;
            tr.appendChild(dayCell);

            timeSlots.forEach(slot => {
                const td = document.createElement('td');
                const workout = trainingData.find(w => w.day === dayIndex && w.duration === slot);

                if (workout) {
                    const passed = isWorkoutPassed(d, slot);
                    td.className = 'workout-cell' + (passed ? ' passed' : '');

                    if (!passed) {
                        td.innerHTML = `
                            <div class="workout-info">
                                <span class="workout-name">${translations[currentLang][workout.name] || workout.name}</span>
                                <span class="workout-btn" onclick="event.stopPropagation(); scrollToBooking('${workout.name}', '${d.toISOString()}')">${translations[currentLang]["btn-details"]}</span>
                            </div>
                        `;
                        td.onclick = () => openWorkoutModal(workout, d);
                    } else {
                        td.innerHTML = `
                            <div class="workout-info">
                                <span class="workout-name" style="opacity: 0.5;">${translations[currentLang][workout.name] || workout.name}</span>
                            </div>
                        `;
                        td.style.cursor = 'default';
                    }
                }
                tr.appendChild(td);
            });
            tbody.appendChild(tr);
        });
        table.appendChild(tbody);
    } else {
        const thead = document.createElement('thead');
        const headerRow = document.createElement('tr');
        const timeHeader = document.createElement('th');
        timeHeader.textContent = translations[currentLang]['class-time'];
        headerRow.appendChild(timeHeader);

        dayOrder.forEach((dayIndex, i) => {
            const th = document.createElement('th');
            const d = weekDates[i];
            const dateStr = `${d.getDate()}.${(d.getMonth() + 1).toString().padStart(2, '0')}`;
            th.innerHTML = `${translations[currentLang].days[dayIndex]}<br><span style="font-size: 0.7rem; opacity: 0.6;">${dateStr}</span>`;
            headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        timeSlots.forEach(slot => {
            const tr = document.createElement('tr');
            const timeCell = document.createElement('td');
            timeCell.className = 'time-cell';
            timeCell.textContent = slot;
            tr.appendChild(timeCell);

            dayOrder.forEach((dayIndex, i) => {
                const td = document.createElement('td');
                const workout = trainingData.find(w => w.day === dayIndex && w.duration === slot);
                if (workout) {
                    const d = weekDates[i];
                    const passed = isWorkoutPassed(d, slot);
                    td.className = 'workout-cell' + (passed ? ' passed' : '');

                    if (!passed) {
                        td.innerHTML = `
                            <div class="workout-info">
                                <span class="workout-name">${translations[currentLang][workout.name] || workout.name}</span>
                                <span class="workout-btn" onclick="event.stopPropagation(); scrollToBooking('${workout.name}', '${d.toISOString()}')">${translations[currentLang]["btn-details"]}</span>
                            </div>
                        `;
                        td.onclick = () => openWorkoutModal(workout, d);
                    } else {
                        td.innerHTML = `
                            <div class="workout-info">
                                <span class="workout-name" style="opacity: 0.5;">${translations[currentLang][workout.name] || workout.name}</span>
                            </div>
                        `;
                        td.style.cursor = 'default';
                    }
                }
                tr.appendChild(td);
            });
            tbody.appendChild(tr);
        });
        table.appendChild(tbody);
    }
    container.appendChild(table);
}

function openWorkoutModal(workout, targetDate = null) {
    const modal = document.getElementById('workout-modal');
    const modalInfo = document.querySelector('.modal-info');

    modalInfo.classList.remove('success-state');

    modalInfo.innerHTML = `
        <h2 id="modal-title">${translations[currentLang][workout.name] || workout.name}</h2>
        <p id="modal-desc">${currentLang === 'bg' ? workout.desc_bg : workout.desc_en}</p>
        <button id="modal-book-btn" class="btn-primary" data-i18n="hero-cta">${translations[currentLang]['hero-cta']}</button>
    `;

    const modalBookBtn = document.getElementById('modal-book-btn');
    modalBookBtn.onclick = () => {
        closeWorkoutModal();
        scrollToBooking(workout.name, targetDate ? targetDate.toISOString() : null);
    };

    modal.style.display = 'flex';
    setTimeout(() => modal.classList.add('show'), 10);
    document.body.style.overflow = 'hidden';
}

function closeWorkoutModal() {
    const modal = document.getElementById('workout-modal');
    modal.classList.remove('show');
    setTimeout(() => {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }, 300);
}

// Modal Close Listeners
document.querySelector('.close-modal').onclick = closeWorkoutModal;
window.onclick = (event) => {
    const modal = document.getElementById('workout-modal');
    if (event.target == modal) closeWorkoutModal();
};

let classOccupancy = {};

function renderWorkoutOptions(data = {}) {
    if (data.occupancy) classOccupancy = data.occupancy;
    const occupancy = classOccupancy;

    const select = document.getElementById('workout-select');
    if (!select) return;
    const availabilityMsg = document.getElementById('availability-msg');
    const currentValue = select.value;

    select.innerHTML = `<option value="">${translations[currentLang]['option-select']}</option>`;

    // Display options for a large window to cover future booking
    const today = new Date();
    for (let i = 0; i < 180; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);
        const dayOfWeek = date.getDay();

        // Find workouts for this day
        const dayWorkouts = trainingData.filter(w => w.day === dayOfWeek);
        dayWorkouts.forEach(w => {
            if (isWorkoutPassed(date, w.time)) return;

            const dateStr = date.toLocaleDateString(currentLang === 'bg' ? 'bg-BG' : 'en-US', { day: 'numeric', month: 'long' });
            const dayNum = date.getDate().toString().padStart(2, '0');
            const monthNum = (date.getMonth() + 1).toString().padStart(2, '0');
            const yearNum = date.getFullYear();
            const optionValue = `${dayNum}.${monthNum}.${yearNum} | ${w.name} [${w.time}]`;

            let booked = occupancy[optionValue] || 0;
            const spotsLeft = Math.max(0, 12 - booked);

            const option = document.createElement('option');
            const workoutNameTranslate = translations[currentLang][w.name] || w.name;
            option.value = optionValue;

            if (spotsLeft === 0) {
                option.disabled = true;
                option.textContent = `${dateStr} - ${workoutNameTranslate} (${w.time}) ${translations[currentLang]['sold-out']}`;
            } else {
                option.textContent = `${dateStr} - ${workoutNameTranslate} (${w.time})`;
            }

            option.dataset.spots = spotsLeft;
            select.appendChild(option);
        });
    }
    if (currentValue) select.value = currentValue;

    select.onchange = () => {
        const selected = select.options[select.selectedIndex];
        if (selected && selected.value && selected.dataset.spots) {
            availabilityMsg.textContent = translations[currentLang]['spots-left'].replace('{x}', selected.dataset.spots);
        } else {
            availabilityMsg.textContent = '';
        }
    };
}

function scrollToBooking(workoutName, dateISO = null) {
    const section = document.getElementById('booking-section');
    if (!section) return;

    section.scrollIntoView({ behavior: 'smooth' });

    const select = document.getElementById('workout-select');
    if (!select) return;

    const workout = trainingData.find(w => w.name === workoutName);
    if (!workout) return;

    let targetDate = dateISO ? new Date(dateISO) : null;

    // Auto-select first available date if none provided
    if (!targetDate) {
        const today = new Date();
        for (let i = 0; i < 30; i++) {
            const d = new Date(today);
            d.setDate(today.getDate() + i);
            if (d.getDay() === workout.day && !isWorkoutPassed(d, workout.time)) {
                targetDate = d;
                break;
            }
        }
    }

    if (targetDate) {
        const dayNum = targetDate.getDate().toString().padStart(2, '0');
        const monthNum = (targetDate.getMonth() + 1).toString().padStart(2, '0');
        const yearNum = targetDate.getFullYear();
        const optionValue = `${dayNum}.${monthNum}.${yearNum} | ${workoutName} [${workout.time}]`;

        select.value = optionValue;

        const availabilityMsg = document.getElementById('availability-msg');
        const selected = select.options[select.selectedIndex];
        if (selected && selected.dataset.spots) {
            availabilityMsg.textContent = translations[currentLang]['spots-left'].replace('{x}', selected.dataset.spots);
        } else {
            availabilityMsg.textContent = '';
        }
    }
}



// Form Submission Logic
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby3lEu4HxZyPoFTI0o5KFLB822i3CiOr48SYgbXFp_H55PlHNWVPYH4hfyY5RZJvkVuTw/exec';

async function handleFormSubmission(form) {
    const formData = new FormData(form);

    // Explicit validation check
    const name = formData.get('name');
    const phone = formData.get('phone');
    const workoutDate = formData.get('workout-date');

    if (!name || !phone || !workoutDate) {
        console.error('Missing required fields');
        return false;
    }

    // Convert to URLSearchParams for application/x-www-form-urlencoded
    const params = new URLSearchParams();
    params.append('name', name);
    params.append('phone', phone);
    params.append('workout-date', workoutDate);

    try {
        const response = await fetch(SCRIPT_URL, {
            method: 'POST',
            body: params,
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
        });
        const result = await response.json();
        return result.status === 'success';
    } catch (err) {
        console.error('Submission error:', err);
        return false;
    }
}

function loadSuccessReel(container) {
    if (!container) return;
    const youtubeId = "G9M_jjkgw6c";
    // YouTube embed URL with autoplay, mute, loop (playlist requirement), and hidden controls
    const youtubeUrl = `https://www.youtube.com/embed/${youtubeId}?autoplay=1&mute=1&loop=1&playlist=${youtubeId}&controls=0&modestbranding=1&rel=0`;

    // Inject spinner and invisible iframe
    container.innerHTML = `
        <div class="reel-spinner"></div>
        <iframe 
            src="${youtubeUrl}" 
            frameborder="0" 
            allow="autoplay; encrypted-media" 
            allowfullscreen="true"
            style="opacity: 0; transition: opacity 0.6s ease; width: 100%; height: 100%;"
            onload="handleReelLoad(this)">
        </iframe>
    `;
}

function handleReelLoad(iframe) {
    // Hide spinner
    if (iframe.previousElementSibling) {
        iframe.previousElementSibling.style.display = 'none';
    }
    // Show video
    iframe.classList.add('loaded');

    // Show hint text (sibling of the wrapper)
    const wrapper = iframe.closest('.video-responsive-wrapper');
    if (wrapper) {
        const hint = wrapper.nextElementSibling;
        if (hint && hint.classList.contains('reel-hint')) {
            hint.classList.remove('hidden');
        }
    }
}

async function fetchOccupancy() {
    try {
        const response = await fetch(SCRIPT_URL);
        const data = await response.json();
        renderWorkoutOptions(data);
    } catch (err) {
        console.error('Error fetching occupancy:', err);
        renderWorkoutOptions({});
    }
}

document.getElementById('booking-form').addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target;
    const submitBtn = form.querySelector('button');
    const originalBtnText = submitBtn.textContent;

    submitBtn.disabled = true;
    submitBtn.textContent = currentLang === 'bg' ? '–ò–∑–ø—Ä–∞—â–∞–Ω–µ...' : 'Sending...';

    const success = await handleFormSubmission(form);

    if (success) {
        const section = document.getElementById('booking-section');
        const title = section.querySelector('h2[data-i18n="booking-title"]');
        const successDiv = document.getElementById('booking-success');

        if (title) title.classList.add('hidden');
        form.classList.add('hidden');

        successDiv.classList.remove('hidden');
        successDiv.scrollIntoView({ behavior: 'smooth' });

        // Lazy load FB Reel in main section
        const mainReelContainer = successDiv.querySelector('#fb-reel-container');
        if (mainReelContainer) loadSuccessReel(mainReelContainer);
    } else {
        alert(currentLang === 'bg' ? '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ—Ç–æ. –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.' : 'Submission error. Please try again.');
        submitBtn.disabled = false;
        submitBtn.textContent = originalBtnText;
    }
});

// Add to Calendar Logic
document.getElementById('add-to-calendar').addEventListener('click', () => {
    const workoutValue = document.getElementById('workout-select').value;
    if (!workoutValue) return;

    // Parsing: "28.02.2026 | Strength Foundations [13:00]"
    const [datePart, nameAndTimePart] = workoutValue.split(' | ');
    const namePart = nameAndTimePart.split(' [')[0];
    const startTimeStr = nameAndTimePart.split(' [')[1].replace(']', '');

    const [d, m, y] = datePart.split('.');
    const isoDate = `${y}-${m}-${d}`;

    // Create Date objects for calculations
    const start = new Date(`${isoDate}T${startTimeStr}:00`);
    const end = new Date(start.getTime() + 60 * 60 * 1000); // +60 mins

    const title = `${translations[currentLang][namePart] || namePart} - Bear Functional`;
    const location = "Bear Functional Gym";
    const description = currentLang === 'bg'
        ? "–ù–µ –∑–∞–±—Ä–∞–≤—è–π —á–∏—Å—Ç–∏ –æ–±—É–≤–∫–∏ –∏ –¥–æ–±—Ä–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! üêª‚õìÔ∏è"
        : "Don't forget clean shoes and good vibes! üêª‚õìÔ∏è";

    // 1. Google Calendar URL
    const formatGcalDate = (d) => d.toISOString().replace(/-|:|\.\d\d\d/g, "");
    const gCalUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${formatGcalDate(start)}/${formatGcalDate(end)}&details=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}`;

    // 2. ICS Content (Universal for iPhone/Outlook)
    const formatIcsDate = (d) => d.toISOString().replace(/-|:|\.\d\d\d/g, "");
    const icsContent = [
        "BEGIN:VCALENDAR",
        "VERSION:2.0",
        "PRODID:-//Bear Functional//NONSGML v1.0//EN",
        "BEGIN:VEVENT",
        `UID:${Date.now()}@bearfunctional.bg`,
        `DTSTAMP:${formatIcsDate(new Date())}`,
        `DTSTART:${formatIcsDate(start)}`,
        `DTEND:${formatIcsDate(end)}`,
        `SUMMARY:${title}`,
        `DESCRIPTION:${description}`,
        `LOCATION:${location}`,
        "BEGIN:VALARM",
        "TRIGGER:-PT30M",
        "ACTION:DISPLAY",
        "DESCRIPTION:Reminder: Workout at Bear Functional",
        "END:VALARM",
        "END:VEVENT",
        "END:VCALENDAR"
    ].join("\n");

    // Open Google Calendar in new tab
    window.open(gCalUrl, '_blank');

    // Download .ics file
    const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8;' });
    const link = document.createElement('a');
    link.href = window.URL.createObjectURL(blob);
    link.setAttribute('download', 'bear-workout.ics');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
});

// Language Switcher Toggle
document.getElementById('lang-switch').addEventListener('click', () => {
    setLanguage(currentLang === 'bg' ? 'en' : 'bg');
});

// Scroll Reveal & Navbar Effects
document.addEventListener('DOMContentLoaded', () => {
    setLanguage('bg');
    fetchOccupancy();

    // Add reveal class to main sections dynamically
    const sections = document.querySelectorAll('section, .overlap-card, .benefit-item');
    sections.forEach(s => s.classList.add('reveal'));

    const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, { threshold: 0.1 });

    sections.forEach(s => revealObserver.observe(s));

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
        const navbar = document.querySelector('.navbar');
        if (window.scrollY > 50) {
            navbar.style.boxShadow = '0 10px 30px rgba(0,0,0,0.08)';
            navbar.style.background = 'rgba(249, 249, 249, 0.95)';
            navbar.style.padding = '1rem 0';
        }
    });

    // Glowing Border Effect Logic
    const benefitItems = document.querySelectorAll('.benefit-item');
    benefitItems.forEach(item => {
        item.addEventListener('mousemove', (e) => {
            const rect = item.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Calculate angle from center
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const angle = Math.atan2(y - centerY, x - centerX) * (180 / Math.PI) + 90;

            item.style.setProperty('--border-angle', `${angle}deg`);
        });
    });
    // Viking Warrior Challenge - Read More Logic
    const expandBtn = document.getElementById('viking-read-more');
    const moreContent = document.querySelector('.desc-more');

    if (expandBtn && moreContent) {
        expandBtn.addEventListener('click', () => {
            const isHidden = moreContent.classList.contains('hidden');
            if (isHidden) {
                moreContent.classList.remove('hidden');
                expandBtn.textContent = currentLang === 'bg' ? '–°–∫—Ä–∏–π' : 'Show Less';
            } else {
                moreContent.classList.add('hidden');
                expandBtn.textContent = translations[currentLang]['btn-read-more'];
            }
        });
    }

    // Handle table responsiveness on resize
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
            renderScheduleTable();
        }, 250);
    });

    // Viking Email Form Logic
    const vikingForm = document.getElementById('viking-email-form');
    const vikingSuccess = document.getElementById('viking-success-msg');

    if (vikingForm) {
        const VIKING_URL = 'https://script.google.com/macros/s/AKfycbzp7ts-TTBFtiIa-B23AnEPZa0IUiC53g32io7Y16OgX2DjPui-0zSy9gMisDM5aNti/exec';

        vikingForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = vikingForm.querySelector('button');
            const originalText = btn.textContent;

            const nameField = document.getElementById('viking-name');
            const emailField = document.getElementById('viking-email');

            const name = nameField.value.trim();
            const email = emailField.value.trim();

            // Simple Email Regex Validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert(currentLang === 'bg' ? '–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –≤–∞–ª–∏–¥–µ–Ω –∏–º–µ–π–ª.' : 'Please enter a valid email.');
                return;
            }

            btn.disabled = true;
            btn.textContent = currentLang === 'bg' ? '–ò–∑–ø—Ä–∞—â–∞–Ω–µ...' : 'Sending...';

            try {
                // Sending to Google Sheets as JSON as requested
                const response = await fetch(VIKING_URL, {
                    method: 'POST',
                    mode: 'no-cors', // Apps Script usually requires no-cors for simple fetch if not handled carefully, 
                    // but the user asked for JSON POST. Standard Apps Script POST often needs no-cors 
                    // or returns 302. Using standard fetch here.
                    body: JSON.stringify({ name, email })
                });

                // Note: With no-cors, we can't see the response. Standard behavior is to assume success if no error thrown.
                vikingForm.classList.add('hidden');
                vikingSuccess.classList.remove('hidden');
                vikingSuccess.textContent = translations[currentLang]['viking-success'];
            } catch (err) {
                console.error('Viking subscription error:', err);
                alert(translations[currentLang]['viking-error']);
                btn.disabled = false;
                btn.textContent = originalText;
            }
        });
    }
});

// Lightbox Logic (Global functions accessible from onclick)
function openLightbox(src) {
    const modal = document.getElementById('lightbox-modal');
    const img = document.getElementById('lightbox-img');
    if (modal && img) {
        img.src = src;
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Prevent scroll
    }
}

function closeLightbox() {
    const modal = document.getElementById('lightbox-modal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restore scroll
    }
}

// Close Lightbox on click outside or close button
document.addEventListener('DOMContentLoaded', () => {
    const lightboxModal = document.getElementById('lightbox-modal');
    const closeBtn = document.querySelector('.close-lightbox');

    if (lightboxModal) {
        lightboxModal.addEventListener('click', (e) => {
            if (e.target === lightboxModal || e.target === closeBtn) {
                closeLightbox();
            }
        });
    }

    // Also close on Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });
});


